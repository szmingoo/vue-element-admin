{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-17810435\"],{1:function(t,e){},\"5e56\":function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"filter-container\"},[a(\"el-row\",[a(\"el-col\",{attrs:{align:\"left\",span:16}},[a(\"el-input\",{staticStyle:{width:\"250px\"},attrs:{placeholder:\"活动名称\",size:\"small\"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,\"name\",e)},expression:\"listQuery.name\"}}),a(\"el-button\",{staticClass:\"height32\",staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"small\"},on:{click:t.handleFilter}},[t._v(\"查询\")]),a(\"el-button\",{attrs:{type:\"success\",align:\"right\"},on:{click:function(e){return t.handleSuite()}}},[t._v(\"一键测试\")])],1)],1)],1),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.listLoading,expression:\"listLoading\"}],key:t.tableKey,staticStyle:{width:\"100%\",\"margin-top\":\"10px\"},attrs:{size:\"small\",data:t.list,border:\"\",fit:\"\",\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{label:\"序号\",type:\"index\",index:t.typeIndex,width:\"100\",align:\"center\"}}),a(\"el-table-column\",{attrs:{label:\"活动名称\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[a(\"span\",[t._v(t._s(i.activity_name))])]}}])}),a(\"el-table-column\",{attrs:{label:\"执行次数\",align:\"center\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[a(\"span\",[t._v(t._s(i.count))])]}}])}),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",\"class-name\":\"small-padding fixed-width\"},scopedSlots:t._u([{key:\"default\",fn:function(e){var i=e.row;return[a(\"el-button\",{attrs:{type:\"primary\",size:\"small\",plain:\"\"},on:{click:function(e){return t.handleTest(i)}}},[t._v(\"执行测试\")])]}}])})],1),a(\"el-dialog\",{attrs:{title:\"一键运行\",visible:t.dialogFormVisible,width:\"20%\",center:\"\"},on:{\"update:visible\":function(e){t.dialogFormVisible=e}}},[a(\"el-form\",{ref:\"dataForm\",attrs:{rules:t.rules,model:t.temp,\"label-width\":\"auto\",\"label-position\":\"top\"}},[a(\"el-form-item\",{attrs:{size:\"\\tmedium\",prop:\"data\"}},[a(\"el-input\",{attrs:{rows:7,type:\"textarea\",placeholder:\"1、如果不输入，则会立即运行；\\n2、请输入定时时间,例每天凌晨两点10执行任务 (秒 分 时 日 月 星期 年)，参数值：* 10 2 * * * *\"},model:{value:t.temp.adjure,callback:function(e){t.$set(t.temp,\"adjure\",e)},expression:\"temp.adjure\"}})],1)],1),a(\"div\",{staticClass:\"dialog-footer\",attrs:{align:\"center\"}},[a(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(e){t.dialogStatus=t.testSuite()}}},[t._v(\"保存\")]),a(\"el-button\",{attrs:{size:\"small\"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(\"关闭\")])],1)],1)],1)},n=[],s=a(\"1da1\"),l=(a(\"96cf\"),a(\"b0c0\"),a(\"b775\"));a(\"4328\");function r(t,e){return Object(l[\"a\"])({url:\"/api/screen/\",method:\"get\",params:{page:e.page,limit:e.limit,name:t.name}})}function o(t){return Object(l[\"a\"])({url:\"/api/auto/\",method:\"post\",data:t})}function c(t){return Object(l[\"a\"])({url:\"/api/testsuite/\",method:\"post\",data:t})}var u={data:function(){return{rules:{url:[{required:!0,message:\"接口地址不能为空\",trigger:\"blur\"}]},temp:{id:void 0,adjure:\"\"},domains:[{value:\"\"}],tableKey:0,list:null,total:0,listLoading:!0,listQuery:{name:void 0},pageInfo:{page:1,limit:100},DialogVisible:!1,dialogFormVisible:!1,dialogStatus:\"\"}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.listLoading=!0,r(this.listQuery,this.pageInfo).then((function(e){t.list=e.data.records,t.total=e.data.total,setTimeout((function(){t.listLoading=!1}),1e3)}))},handleFilter:function(){this.pageInfo.page=1,this.getList()},handleTest:function(t){var e=this;this.$confirm(\"是否确定自动测试该活动?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"info\"}).then(Object(s[\"a\"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$message({type:\"success\",message:\"稍后将会在企业微信群聊中发送测试报告！\"}),a.next=3,o({id:t.id});case 3:e.getList();case 4:case\"end\":return a.stop()}}),a)})))).catch((function(){e.$message({type:\"success\",message:\"已取消测试\"})}))},handleSuite:function(){this.dialogStatus=\"create\",this.dialogFormVisible=!0},testSuite:function(){var t=this;this.$refs[\"dataForm\"].validate(Object(s[\"a\"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.dialogFormVisible=!1,\"\"==t.temp.adjure?t.$message({type:\"success\",message:\"稍后将会在企业微信群聊中发送测试报告\"}):t.$message({type:\"success\",message:\"将在设置的时间运行，并在企业微信群聊中发送测试报告\"}),e.next=4,c(t.temp);case 4:t.getList();case 5:case\"end\":return e.stop()}}),e)}))))}}},d=u,m=a(\"2877\"),p=Object(m[\"a\"])(d,i,n,!1,null,null,null);e[\"default\"]=p.exports}}]);","extractedComments":[]}