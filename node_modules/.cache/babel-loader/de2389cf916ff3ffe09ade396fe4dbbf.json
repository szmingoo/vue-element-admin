{"remainingRequest":"D:\\code\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!D:\\code\\vue-element-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\code\\vue-element-admin\\src\\directive\\el-drag-dialog\\drag.js","dependencies":[{"path":"D:\\code\\vue-element-admin\\src\\directive\\el-drag-dialog\\drag.js","mtime":1670579278535},{"path":"D:\\code\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"D:\\code\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532801399},{"path":"D:\\code\\vue-element-admin\\node_modules\\eslint-loader\\index.js","mtime":499162500371}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoZWwsIGJpbmRpbmcsIHZub2RlKSB7CiAgICB2YXIgZGlhbG9nSGVhZGVyRWwgPSBlbC5xdWVyeVNlbGVjdG9yKCcuZWwtZGlhbG9nX19oZWFkZXInKTsKICAgIHZhciBkcmFnRG9tID0gZWwucXVlcnlTZWxlY3RvcignLmVsLWRpYWxvZycpOwogICAgZGlhbG9nSGVhZGVyRWwuc3R5bGUuY3NzVGV4dCArPSAnO2N1cnNvcjptb3ZlOyc7CiAgICBkcmFnRG9tLnN0eWxlLmNzc1RleHQgKz0gJzt0b3A6MHB4Oyc7CgogICAgLy8g6I635Y+W5Y6f5pyJ5bGe5oCnIGllIGRvbeWFg+e0oC5jdXJyZW50U3R5bGUg54Gr54uQ6LC35q2MIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvbeWFg+e0oCwgbnVsbCk7CiAgICB2YXIgZ2V0U3R5bGUgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh3aW5kb3cuZG9jdW1lbnQuY3VycmVudFN0eWxlKSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkb20sIGF0dHIpIHsKICAgICAgICAgIHJldHVybiBkb20uY3VycmVudFN0eWxlW2F0dHJdOwogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkb20sIGF0dHIpIHsKICAgICAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKGRvbSwgZmFsc2UpW2F0dHJdOwogICAgICAgIH07CiAgICAgIH0KICAgIH0oKTsKICAgIGRpYWxvZ0hlYWRlckVsLm9ubW91c2Vkb3duID0gZnVuY3Rpb24gKGUpIHsKICAgICAgLy8g6byg5qCH5oyJ5LiL77yM6K6h566X5b2T5YmN5YWD57Sg6Led56a75Y+v6KeG5Yy655qE6Led56a7CiAgICAgIHZhciBkaXNYID0gZS5jbGllbnRYIC0gZGlhbG9nSGVhZGVyRWwub2Zmc2V0TGVmdDsKICAgICAgdmFyIGRpc1kgPSBlLmNsaWVudFkgLSBkaWFsb2dIZWFkZXJFbC5vZmZzZXRUb3A7CiAgICAgIHZhciBkcmFnRG9tV2lkdGggPSBkcmFnRG9tLm9mZnNldFdpZHRoOwogICAgICB2YXIgZHJhZ0RvbUhlaWdodCA9IGRyYWdEb20ub2Zmc2V0SGVpZ2h0OwogICAgICB2YXIgc2NyZWVuV2lkdGggPSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoOwogICAgICB2YXIgc2NyZWVuSGVpZ2h0ID0gZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7CiAgICAgIHZhciBtaW5EcmFnRG9tTGVmdCA9IGRyYWdEb20ub2Zmc2V0TGVmdDsKICAgICAgdmFyIG1heERyYWdEb21MZWZ0ID0gc2NyZWVuV2lkdGggLSBkcmFnRG9tLm9mZnNldExlZnQgLSBkcmFnRG9tV2lkdGg7CiAgICAgIHZhciBtaW5EcmFnRG9tVG9wID0gZHJhZ0RvbS5vZmZzZXRUb3A7CiAgICAgIHZhciBtYXhEcmFnRG9tVG9wID0gc2NyZWVuSGVpZ2h0IC0gZHJhZ0RvbS5vZmZzZXRUb3AgLSBkcmFnRG9tSGVpZ2h0OwoKICAgICAgLy8g6I635Y+W5Yiw55qE5YC85bimcHgg5q2j5YiZ5Yy56YWN5pu/5o2iCiAgICAgIHZhciBzdHlMID0gZ2V0U3R5bGUoZHJhZ0RvbSwgJ2xlZnQnKTsKICAgICAgdmFyIHN0eVQgPSBnZXRTdHlsZShkcmFnRG9tLCAndG9wJyk7CiAgICAgIGlmIChzdHlMLmluY2x1ZGVzKCclJykpIHsKICAgICAgICBzdHlMID0gK2RvY3VtZW50LmJvZHkuY2xpZW50V2lkdGggKiAoK3N0eUwucmVwbGFjZSgvXCUvZywgJycpIC8gMTAwKTsKICAgICAgICBzdHlUID0gK2RvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0ICogKCtzdHlULnJlcGxhY2UoL1wlL2csICcnKSAvIDEwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3R5TCA9ICtzdHlMLnJlcGxhY2UoL1xweC9nLCAnJyk7CiAgICAgICAgc3R5VCA9ICtzdHlULnJlcGxhY2UoL1xweC9nLCAnJyk7CiAgICAgIH0KICAgICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIC8vIOmAmui/h+S6i+S7tuWnlOaJmO+8jOiuoeeul+enu+WKqOeahOi3neemuwogICAgICAgIHZhciBsZWZ0ID0gZS5jbGllbnRYIC0gZGlzWDsKICAgICAgICB2YXIgdG9wID0gZS5jbGllbnRZIC0gZGlzWTsKCiAgICAgICAgLy8g6L6555WM5aSE55CGCiAgICAgICAgaWYgKC1sZWZ0ID4gbWluRHJhZ0RvbUxlZnQpIHsKICAgICAgICAgIGxlZnQgPSAtbWluRHJhZ0RvbUxlZnQ7CiAgICAgICAgfSBlbHNlIGlmIChsZWZ0ID4gbWF4RHJhZ0RvbUxlZnQpIHsKICAgICAgICAgIGxlZnQgPSBtYXhEcmFnRG9tTGVmdDsKICAgICAgICB9CiAgICAgICAgaWYgKC10b3AgPiBtaW5EcmFnRG9tVG9wKSB7CiAgICAgICAgICB0b3AgPSAtbWluRHJhZ0RvbVRvcDsKICAgICAgICB9IGVsc2UgaWYgKHRvcCA+IG1heERyYWdEb21Ub3ApIHsKICAgICAgICAgIHRvcCA9IG1heERyYWdEb21Ub3A7CiAgICAgICAgfQoKICAgICAgICAvLyDnp7vliqjlvZPliY3lhYPntKAKICAgICAgICBkcmFnRG9tLnN0eWxlLmNzc1RleHQgKz0gIjtsZWZ0OiIuY29uY2F0KGxlZnQgKyBzdHlMLCAicHg7dG9wOiIpLmNvbmNhdCh0b3AgKyBzdHlULCAicHg7Iik7CgogICAgICAgIC8vIGVtaXQgb25EcmFnIGV2ZW50CiAgICAgICAgdm5vZGUuY2hpbGQuJGVtaXQoJ2RyYWdEaWFsb2cnKTsKICAgICAgfTsKICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7CiAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDsKICAgICAgfTsKICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["bind","el","binding","vnode","dialogHeaderEl","querySelector","dragDom","style","cssText","getStyle","window","document","currentStyle","dom","attr","getComputedStyle","onmousedown","e","disX","clientX","offsetLeft","disY","clientY","offsetTop","dragDomWidth","offsetWidth","dragDomHeight","offsetHeight","screenWidth","body","clientWidth","screenHeight","clientHeight","minDragDomLeft","maxDragDomLeft","minDragDomTop","maxDragDomTop","styL","styT","includes","replace","onmousemove","left","top","concat","child","$emit","onmouseup"],"sources":["D:/code/vue-element-admin/src/directive/el-drag-dialog/drag.js"],"sourcesContent":["export default {\r\n  bind(el, binding, vnode) {\r\n    const dialogHeaderEl = el.querySelector('.el-dialog__header')\r\n    const dragDom = el.querySelector('.el-dialog')\r\n    dialogHeaderEl.style.cssText += ';cursor:move;'\r\n    dragDom.style.cssText += ';top:0px;'\r\n\r\n    // 获取原有属性 ie dom元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\r\n    const getStyle = (function() {\r\n      if (window.document.currentStyle) {\r\n        return (dom, attr) => dom.currentStyle[attr]\r\n      } else {\r\n        return (dom, attr) => getComputedStyle(dom, false)[attr]\r\n      }\r\n    })()\r\n\r\n    dialogHeaderEl.onmousedown = (e) => {\r\n      // 鼠标按下，计算当前元素距离可视区的距离\r\n      const disX = e.clientX - dialogHeaderEl.offsetLeft\r\n      const disY = e.clientY - dialogHeaderEl.offsetTop\r\n\r\n      const dragDomWidth = dragDom.offsetWidth\r\n      const dragDomHeight = dragDom.offsetHeight\r\n\r\n      const screenWidth = document.body.clientWidth\r\n      const screenHeight = document.body.clientHeight\r\n\r\n      const minDragDomLeft = dragDom.offsetLeft\r\n      const maxDragDomLeft = screenWidth - dragDom.offsetLeft - dragDomWidth\r\n\r\n      const minDragDomTop = dragDom.offsetTop\r\n      const maxDragDomTop = screenHeight - dragDom.offsetTop - dragDomHeight\r\n\r\n      // 获取到的值带px 正则匹配替换\r\n      let styL = getStyle(dragDom, 'left')\r\n      let styT = getStyle(dragDom, 'top')\r\n\r\n      if (styL.includes('%')) {\r\n        styL = +document.body.clientWidth * (+styL.replace(/\\%/g, '') / 100)\r\n        styT = +document.body.clientHeight * (+styT.replace(/\\%/g, '') / 100)\r\n      } else {\r\n        styL = +styL.replace(/\\px/g, '')\r\n        styT = +styT.replace(/\\px/g, '')\r\n      }\r\n\r\n      document.onmousemove = function(e) {\r\n        // 通过事件委托，计算移动的距离\r\n        let left = e.clientX - disX\r\n        let top = e.clientY - disY\r\n\r\n        // 边界处理\r\n        if (-(left) > minDragDomLeft) {\r\n          left = -minDragDomLeft\r\n        } else if (left > maxDragDomLeft) {\r\n          left = maxDragDomLeft\r\n        }\r\n\r\n        if (-(top) > minDragDomTop) {\r\n          top = -minDragDomTop\r\n        } else if (top > maxDragDomTop) {\r\n          top = maxDragDomTop\r\n        }\r\n\r\n        // 移动当前元素\r\n        dragDom.style.cssText += `;left:${left + styL}px;top:${top + styT}px;`\r\n\r\n        // emit onDrag event\r\n        vnode.child.$emit('dragDialog')\r\n      }\r\n\r\n      document.onmouseup = function(e) {\r\n        document.onmousemove = null\r\n        document.onmouseup = null\r\n      }\r\n    }\r\n  }\r\n}\r\n"],"mappings":"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"}]}